<!DOCTYPE html>
<html>
<head>
    <title>Blood Donation App</title>
</head>
<body>
    <h1>Blood Donation Portal</h1>

    <!-- Show messages -->
    {% if message %}
        <p>{{ message }}</p>
    {% endif %}

    <!-- Section 1: Add Donor -->
    <h2>Add Donor</h2>
    <form method="POST" action="/add_donor">
        <input name="name" placeholder="Name" required><br>
        <input name="age" type="number" placeholder="Age" required><br>
        <input name="weight" type="number" placeholder="Weight" required><br>
        <input name="hemoglobin" type="number" step="0.1" placeholder="Hemoglobin" required><br>
        <input name="blood_group" placeholder="Blood Group" required><br>
        <input name="last_donation" type="date" required><br>
        <input name="contact" placeholder="Contact" required><br>
        <input name="address" placeholder="Address" required><br>
        <input name="latitude" type="number" step="any" placeholder="Latitude" required><br>
        <input name="longitude" type="number" step="any" placeholder="Longitude" required><br>
        <button type="submit">Add Donor</button>
    </form>

    <!-- Section 2: Find Donors -->
    <h2>Find Eligible Donors</h2>
    <form method="POST" action="/find_donors">
        <input name="blood_group" placeholder="Blood Group" required><br>
        <input name="user_lat" type="number" step="any" placeholder="Your Latitude" required><br>
        <input name="user_lon" type="number" step="any" placeholder="Your Longitude" required><br>
        <button type="submit">Find Donors</button>
    </form>

    <!-- Section 3: Show Donors -->
    {% if donors %}
        <h2>Eligible Donors Near You</h2>
        <table border="1">
            <tr>
                <th>Name</th><th>Contact</th><th>Address</th><th>Distance (km)</th>
            </tr>
            {% for donor in donors %}
            <tr>
                <td>{{ donor.name }}</td>
                <td>{{ donor.contact }}</td>
                <td>{{ donor.address }}</td>
                <td>{{ donor.distance_km }}</td>
            </tr>
            {% endfor %}
        </table>
    {% endif %}
</body>
</html>
